<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="htmlgraph-version" content="1.0">
    <title>Feature: Drift Threshold Auto-Classification</title>
    <link rel="stylesheet" href="../styles.css">
</head>
<body>
    <article id="feature-drift-auto-classification"
             data-type="feature"
             data-track-id="htmlgraph-dev"
             data-status="todo"
             data-priority="high"
             data-created="2025-12-16T09:30:00Z"
             data-updated="2025-12-16T09:30:00Z"
             data-agent-assigned="">

        <header>
            <h1>Drift Threshold Auto-Classification</h1>
            <div class="metadata">
                <span class="badge status-todo">Todo</span>
                <span class="badge priority-high">High Priority</span>
                <span class="badge type-feature">Feature</span>
            </div>
        </header>

        <nav data-graph-edges>
            <section data-edge-type="related">
                <h3>Related:</h3>
                <ul>
                    <li><a href="feature-self-tracking.html" data-relationship="related">Feature: Self-Tracking</a></li>
                </ul>
            </section>
            <section data-edge-type="depends-on">
                <h3>Depends On:</h3>
                <ul>
                    <li><a href="../chores/chore-plugin-hooks-refinement.html" data-relationship="depends-on">Chore: Plugin Hooks Refinement</a></li>
                </ul>
            </section>
        </nav>

        <section data-content>
            <h3>Description</h3>
            <p>When drift detection exceeds a configurable threshold, automatically spawn a Haiku agent to classify the activity and create appropriate work items (bug, feature, epic, spike, chore).</p>

            <h4>Motivation</h4>
            <p>Currently, drift scores are tracked but not acted upon. High drift indicates the agent is working on something not covered by existing work items. This feature would automatically create proper associations and classifications.</p>

            <h4>Proposed Behavior</h4>
            <ul>
                <li>Configure drift threshold (e.g., 0.5 or 0.6)</li>
                <li>When activity drift exceeds threshold, spawn Haiku agent</li>
                <li>Haiku agent analyzes activity context against kanban_policy.md</li>
                <li>Creates appropriate work item (bug/feature/spike/chore)</li>
                <li>Links activity to new work item</li>
            </ul>

            <h4>Configuration</h4>
            <pre>
drift_threshold: 0.5
auto_classify: true
work_item_types:
  - bug: "Fix issues, errors, defects"
  - feature: "New functionality"
  - spike: "Research, exploration"
  - chore: "Maintenance, cleanup"
            </pre>
        </section>

        <section data-steps>
            <h3>Implementation Steps</h3>
            <ol>
                <li data-completed="true" data-agent="claude">Add drift_threshold configuration to plugin settings</li>
                <li data-completed="true" data-agent="claude">Create Haiku agent prompt template for classification</li>
                <li data-completed="true" data-agent="claude">Implement Task tool spawning in track-event.py hook</li>
                <li data-completed="true" data-agent="claude">Create work item templates for each type</li>
                <li data-completed="false">Add activity-to-work-item linking</li>
                <li data-completed="false">Test with various activity types</li>
            </ol>
        </section>

        <section data-activity-log>
            <h3>Activity Log</h3>
            <ol reversed>
                <li data-timestamp="2025-12-16T09:30:00Z" data-agent="claude">Feature created from session activity review</li>
            </ol>
        </section>
    </article>
</body>
</html>
